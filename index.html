<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solicitação de Pedido Extra</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #0a66c2;
      --primary-hover-color: #004182;
      --danger-color: #e53e3e;
      --danger-hover-color: #c53030;
      --background-light: #1a1a2e;
      --background-white: #16213e;
      --text-dark: #ffffff;
      --text-medium: #b8b8b8;
      --border-light: #2a2a3a;
      --shadow-light: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
      --transition-all: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    body {
      background-color: var(--background-light);
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      box-sizing: border-box;
      color: var(--text-dark);
    }

    .container {
      max-width: 800px;
      width: 100%;
      background-color: var(--background-white);
      margin: 40px auto;
      padding: 50px;
      border-radius: 20px;
      box-shadow: var(--shadow-light);
      transition: var(--transition-all);
    }

    .container:hover {
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
    }

    h2 {
      text-align: center;
      color: var(--text-dark);
      margin-bottom: 40px;
      font-weight: 700;
      font-size: 1.5rem;
      letter-spacing: -0.025em;
    }

    label {
      display: block;
      margin-top: 25px;
      color: var(--text-medium);
      font-weight: 500;
      margin-bottom: 8px;
      font-size: 0.95rem;
    }

    input[type="text"],
    input[type="number"] {
      width: 100%;
      padding: 14px 18px;
      border: 1px solid var(--border-light);
      border-radius: 12px;
      box-sizing: border-box;
      font-size: 1rem;
      color: var(--text-dark);
      background-color: rgba(255, 255, 255, 0.1);
      transition: var(--transition-all);
    }

    input[type="text"]:focus,
    input[type="number"]:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 4px rgba(10, 102, 194, 0.3);
      background-color: rgba(255, 255, 255, 0.15);
    }

    input:-webkit-autofill {
      -webkit-box-shadow: 0 0 0px 1000px rgba(255, 255, 255, 0.1) inset !important;
      -webkit-text-fill-color: var(--text-dark) !important;
      transition: background-color 5000s ease-in-out 0s;
    }

    input:-webkit-autofill:focus {
      -webkit-box-shadow: 0 0 0px 1000px rgba(255, 255, 255, 0.15) inset !important;
    }

    input:-internal-autofill-selected {
      background-color: rgba(255, 255, 255, 0.1) !important;
      color: var(--text-dark) !important;
    }

    .custom-select {
      position: relative;
      width: 100%;
    }

    .custom-select .selected {
      width: 100%;
      padding: 14px 18px;
      border: 1px solid var(--border-light);
      border-radius: 12px;
      box-sizing: border-box;
      font-size: 1rem;
      color: var(--text-dark);
      background-color: rgba(255, 255, 255, 0.1);
      transition: var(--transition-all);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .custom-select .selected::after {
      content: '▼';
      font-size: 0.8rem;
      color: var(--text-medium);
      margin-left: 10px;
    }

    .custom-select .selected:hover,
    .custom-select .selected:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 4px rgba(10, 102, 194, 0.3);
      background-color: rgba(255, 255, 255, 0.15);
    }

    .custom-select .options {
      position: absolute;
      top: 100%;
      left: 0;
      width: 100%;
      background-color: var(--background-white);
      border: 1px solid var(--border-light);
      border-radius: 12px;
      box-shadow: var(--shadow-light);
      max-height: 200px;
      overflow-y: auto;
      z-index: 10;
      display: none;
      margin-top: 4px;
      animation: fadeIn 0.3s ease-in-out;
    }

    .custom-select .options .option {
      padding: 12px 18px;
      color: var(--text-dark);
      cursor: pointer;
      transition: var(--transition-all);
      font-size: 1rem;
    }

    .custom-select .options .option:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    .custom-select .options .option.selected {
      background-color: rgba(10, 102, 194, 0.2);
    }

    .setor {
      margin-top: 40px;
      padding: 30px;
      border: 1px solid var(--border-light);
      border-radius: 16px;
      background-color: rgba(0, 0, 0, 0.2);
      position: relative;
      box-shadow: var(--shadow-light);
      transition: var(--transition-all);
    }

    .setor:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
    }

    .setor > label {
      margin-top: 0;
    }

    .setor-select-group {
      display: flex;
      align-items: flex-end;
      gap: 20px;
    }

    .setor-select-group .custom-select {
      flex: 1;
    }

    .setor-select-group .remove-setor-button {
      flex-shrink: 0;
      padding: 12px 18px;
      font-size: 0.95rem;
      border-radius: 12px;
      position: static;
      box-shadow: var(--shadow-light);
    }

    .item {
      margin-top: 20px;
      padding: 30px;
      border: 1px solid var(--border-light);
      border-radius: 16px;
      background-color: rgba(0, 0, 0, 0.2);
      position: relative;
      box-shadow: var(--shadow-light);
      transition: var(--transition-all);
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      align-items: flex-end;
    }

    .item:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
    }

    .item .item-input-group {
      flex: 1;
    }

    .item .item-input-group.item-nome-group {
      min-width: 300px;
      flex-grow: 2;
    }

    .item .item-input-group.item-qtd-group {
      min-width: 120px;
      max-width: 150px;
      flex-grow: 1;
    }

    .item .item-input-group label {
      margin-top: 0;
      margin-bottom: 8px;
    }

    .item .item-input-group input {
      width: 100%;
      margin-top: 0;
    }

    .item .remove-item-button {
      flex-shrink: 0;
      padding: 12px 18px;
      font-size: 0.95rem;
      border-radius: 12px;
      align-self: flex-end;
      margin-left: 20px;
    }

    .observacao-group {
      margin-top: 20px;
    }

    .buttons {
      margin-top: 50px;
      text-align: center;
      display: flex;
      justify-content: center;
      gap: 20px;
    }

    button {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-hover-color));
      color: white;
      padding: 14px 30px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: var(--transition-all);
      box-shadow: var(--shadow-light);
    }

    button:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
    }

    .remove-button {
      background: linear-gradient(135deg, var(--danger-color), var(--danger-hover-color));
    }
    .remove-button:hover {
      background: linear-gradient(135deg, var(--danger-hover-color), var(--danger-color));
    }

    .remove-setor-button:hover {
      transform: scale(1.05);
    }

    .item-buttons {
      margin-top: 25px;
      text-align: right;
    }

    .setor, .item {
      animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 768px) {
      .container {
        margin: 20px;
        padding: 30px;
      }
      .buttons {
        flex-direction: column;
        gap: 15px;
      }
      .setor-select-group {
        flex-direction: column;
        align-items: stretch;
      }
      .setor-select-group .remove-setor-button {
        margin-top: 10px;
        width: auto;
      }
      .item {
        flex-direction: column;
        align-items: stretch;
      }
      .item .item-input-group {
        min-width: unset;
        max-width: 100%;
      }
      .item .remove-item-button {
        margin-left: 0;
        margin-top: 10px;
        width: auto;
        align-self: flex-start;
      }
    }
  </style>
</head>
<body oncontextmenu="return false;">

<div class="container">
  <h2>Solicitação de Pedido Extra</h2>

  <form id="pedidoForm">
    <label for="solicitante">Nome do Solicitante:</label>
    <input type="text" id="solicitante" required>

    <label for="unidade">Unidade Solicitante:</label>
    <input type="text" id="unidade" required>

    <div id="setoresContainer"></div>

    <div class="buttons">
      <button type="button" onclick="adicionarSetor()">Adicionar Novo Setor</button>
      <button type="submit">Enviar Pedido</button>
    </div>
  </form>
</div>

<datalist id="lista-itens"></datalist>

<script>
  // Item lists
  const farmaciaItems = [
    "1010600017 Aciclovir 200mg comprimido",
    "101060025 Aciclovir 50mg/g creme bisnaga - uso tópico - uso adulto e pediátrico",
    "1012000300 Ácido acético 3% frasco 10ml (manipulado)",
    "1012000475 Ácido acético 5% frasco 10ml (manipulado)",
    "1010300013 Ácido acetilsalicílico 100mg comprimido",
    "1010300064 Ácido acetilsalicílico 500mg comprimido",
    "1010900010 Ácido fólico 5mg comprimido",
    "1012000319 Ácido tricloroacético 80% frasco 10ml (manipulado)",
    "1012001633 Agua destilada ampola 10ml",
    "1020100181 Agulha para aplicação de insulina com caneta 0,23X4MM",
    "1010500144 Alcatrão Mineral (FN) 10mg/g (1%) pomada",
    "1091206055 ALENDRONATO DE SODIO 70MG COMPRIMIDO - USO ADULTO",
    "1010700054 Albendazol 400mg comprimido mastigável",
    "1010700062 Albendazol 400mg solução oral frasco 10ml",
    "1010800059 Algestona acetofenida 150mg/ml + estradiol, enantato 10mg/ml ampola 1ml - Uso Im",
    "1010100014 Alopurinol 100mg comprimido",
    "1011100115 Aminofilina 100mg comprimido",
    "1012000092 Amiodarona, cloridrato 200mg comprimido",
    "1011700090 Amoxicilina 250mg/5ml suspensão frasco 150ml",
    "1011700104 Amoxicilina 500mg comprimido",
    "1011700341 Amoxicilina 500mg + Clavunalato de potassio125mg comprimido",
    "1011700619 Amoxicilina trihidratada 287mg/5ml - equivalente a 250mg/5ml de amoxicilina + clavulanato de potássio 74,5mg/5ml - equivalente a 62,5mg/5ml de ácido clavulânico pó para suspensão oral frasco 75ml - uso adulto e pediátrico",
    "1011700252 Ampicilina 250mg/5ml suspensão frasco 60ml",
    "1011700244 Ampicilina 500mg comprimido",
    "1010200019 Anlodipino, besilato 5mg comprimido - uso adulto",
    "1010200760 Atenolol 25mg comprimido - uso adulto",
    "1011700295 Azitromicina dihidratada 524,10mg - equivalente a 500mg azitromicina base comprimido",
    "1011700511 Azitromicina dihidratada 209,605mg - equivalente a 200mg de azitromicina base para cada 5ml de suspensão oral reconstituida de 600mg ou 900mg",
    "1011100255 Beclometasona, dipropionato 200mcg capsula oral",
    "1011100034 Beclometasona, dipropionato 250mcg spray oral frasco 200 doses",
    "1011100018 Beclometasona, dipropionato 50mcg spray nasal frasco 200 doses",
    "1011700163 Benzilpenicilina benzatina 1.200.000 Ui frasco-ampola - Uso Im",
    "1011700171 Benzilpenicilina benzatina 600.000 Ui frasco-ampola - Uso Im",
    "1011700180 Benzilpenicilina procaína 300.000 Ui + benzilpenicilina potássica 100.000 Ui frasco-ampola - Uso Im",
    "1010700143 Benzoato de benzila 250mg/ml solução frasco 100ml",
    "1011700759 Benzoíla, peróxido 25mg (2,5%) base aquosa - gel",
    "1011200505 Betamesona, acetato de 3mg/ml+betametasona, fosfato dissódico 3,945mg/ml (equivalente a 3mg/ml de betametasona) suspensão injetavel - ampola 1ml",
    "1011800079 Bromoprida 10mg comprimido",
    "1011300157 Budesonida 32mcg/dose frasco 120 doses",
    "1011300351 Budesonida 50mcg/dose suspensão em spray estéril - frasco contendo 120 doses",
    "1012000246 Bultilbrometo de escopolamina 10 mg comprimido +dipirona 250 mg comprimido revestido",
    "1012000203 Butilbrometo de escopolamina + dipirona sódica - Uso Im/Iv - ampola 5 ml",
    "1012000106 Butilbrometo de escopolamina 6,67 mg/ml + dipirona 333,4 ml gotas frasco 20 ml",
    "1012000076 Butilbrometo de escopolamina 10 mg comprimido",
    "1012000190 Butilbrometo de escopolamina 20 mg/ml - ampola 1 ml",
    "1012000424 Butilbrometo de escopolamina 10 mg/ml gotas frasco 20 ml",
    "1091210281 CARBONATO DE CALCIO 1250MG (EQUIVALENTE A 500MG DE CALCIO) COMPRIMIDO",
    "1012002389 CARBONATO DE CALCIO 1500MG (EQUIVALENTE A 600MG DE CALCIO) + colecalciferol 400 UI",
    "1012001080 CARBONATO DE CALCIO 1500MG + colecalciferol 200 UI COMP",
    "1010200043 Captopril 25mg comprimido",
    "1010200671 Carvedilol 12,5mg comprimido - USO ADULTO",
    "1010200418 Carvedilol 6,25mg comprimido - USO ADULTO",
    "1011700074 Cefalexina 250 mg/5 ml suspensão frasco 60 ml",
    "1011700198 Cefalexina 500 mg comprimido",
    "1011700538 Ceftriaxona sódica hemieptaidratada 1,193g - equivalente a 1g de ceftriaxona base frasco-ampola acompanhado de ampola diluente lidocaina 10mg/ml 3,5ml - uso IM",
    "1020600257 Caneta para injeção de insulina Refil - compativel com carpule 3ml (100UI/ml)",
    "1010500063 Cetoconazol 200 mg comprimido",
    "1010500047 Cetoconazol creme 20 mg/g tubo 30 g",
    "1010500039 Cetoconazol shampoo 20 mg/g frasco 100 ml",
    "1010100146 Cetoprofeno 100mg ampola 2ml - uso IM",
    "1010100154 Cetoprofeno 100mg ampola - uso IV",
    "1012000149 Cetotifeno, fumarato xarope frasco120 ml - uso adulto e pediátrico",
    "1011000048 Cimetidina 200 mg comprimido",
    "1012000114 Cinarizina 25 mg comprimido",
    "1011700376 Ciprofloxacino, cloridrato monohidratado 582mg - equivalente a 500MG de ciprofloxacino comprimido - USO ADULTO",
    "1011700490 Claritromicina 500mg comprimido",
    "1011700317 Clindamicina, cloridrato 300mg caps",
    "1010200051 Clonidina, cloridrato 0,150mg comprimido",
    "1010200078 Clortalidona 25mg comprimido",
    "1012000033 Cold cream tubo 50G (manipulado)",
    "1010900096 Complexo B comprimido",
    "1010900100 Complexo B amp 2 ml",
    "1010700097 Deltametrina loção 0,02% frasco 100 ml",
    "1012000351 Deltametrina shampoo frasco 100 ml",
    "1011300521 Dexametasona 4mg comprimido - uso adulto e pediátrico",
    "1011300076 Dexametasona,Fosfato Dissódico 4MG/ML - Frasco 2,5 ML",
    "1012000165 Dexametasona, acetato (Ampola I) + cianocobalamina + tiamina, cloridrato + piridoxina, cloridrato (Ampola II) - Uso Im",
    "1011300114 Dexametasona, acetato creme dermatológico 1 mg/g tubo 10 g",
    "1011300513 Dexametasona 1 mg/g suspensão oftalmica esterio frasco 5ml- uso tópicp ocular -uso adulto",
    "1011300017 Dexclorfeniramina, maleato 2 mg comprimido",
    "1011300041 Dexclorfeniramina, maleato 2 mg/5 ml suspensão frasco 100 ml",
    "1012002001 Dextrano 70 1mg/ml + Hipromelose 3mg/ml frasco 15 ml",
    "1010100057 Diclofenaco de sódio 75mg ampola 3ml",
    "1010100081 Diclofenaco sódico 50mg comprimido",
    "1012000220 Digoxina 0,25 mg comprimido",
    "1011800060 Dimenidrinato + piridoxina, 50/10mg cloridrato comprimido",
    "1011800095 Dimenidrinato + piridoxina, cloridrato + glicose + frutose ampola 10 ml - Uso Ev",
    "1012000289 Dimenidrinato + piridoxina, cloridrato ampola 1 ml - Uso Im",
    "1011800036 Dimenidrinato + piridoxina, cloridrato gotas frasco 20 ml",
    "1010300099 Dipirona sódica 500 mg comprimido",
    "1010300056 Dipirona sódica 500 mg/ml ampola 2 ml",
    "1010300048 Dipirona sódica 500 mg/ml gotas frasco 10 ml",
    "1011800028 Domperidona suspensão 1 mg/ml frasco 100 ml",
    "1012001706 Doxazosina, mesilato 2MG comprimido",
    "1010200094 Enalapril, maleato 10mg comprimido",
    "1010200108 Enalapril, maleato 20mg comprimido",
    "1010200086 Enalapril, maleato 5mg comprimido",
    "1011700643 Eritromicina, estolato 250 mg/ 5 ml suspensão frasco 100ml",
    "1011700732 Eritromicina, estolato 250 mg/ 5 ml suspensão oral frasco 60ml",
    "1010200116 Espironolactona 25mg comprimido",
    "1010800229 Estriol 1mg/g creme vaginal bisnaga 50+aplicador - uso intravaginal - uso adulto",
    "1010800199 Estrogênios conjugados 0,3mg - drágeas - uso oral p/adultos",
    "1012000769 Finasterida 5MG comprimido",
    "1021400073 Fitas para hemoglicoteste - ( hgt )",
    "1010200183 Furosemida 10 mg/ml ampola 2 ml",
    "1010200140 Furosemida 40 mg comprimido",
    "1010500012 Fluconazol 150mg capsula - uso adulto",
    "1011200012 Glibenclamida 5 mg comprimido",
    "1012004420 Glicerol 2,68G supositório - uso retal - uso adulto",
    "1011200527 Gliclazida 60 mg comprimido (liberação modificada)",
    "1012000173 Glicose 25% ampola 10 ml",
    "1012000181 Glicose 50% ampola 10 ml",
    "1012000394 Heparina Sódica 5.000ui/0,25ml AMP 0,25ml USO SC",
    "1010200507 Hidralazina, cloridrato 25mg drágea - uso adulto",
    "1010200060 Hidroclorotiazida 25mg comprimido",
    "1012000297 Hidrocortisona, acetato 11,2mg (equivalente a 10mg de hidrocortisona) creme - bisnaga de 20mg - uso dermatológico",
    "1012000297 Hidrocortisona + neomicina, sulfato + polimixina b, sulfato gotas frasco 10 ml (tipo otosporin)",
    "1011300092 Hidrocortisona, succinato 500 mg frasco",
    "1011000030 Hidróxido de alumínio 60 mg/ml suspensão frasco 150 ml",
    "1012000068 Hidróxido de magnésio 80 mg/ml suspensão frasco 120 ml",
    "1012000408 Hidróxido de potássio 10% frasco 10 ml (manipulado)",
    "1010100120 Ibuprofeno 300mg comprimido - uso adulto",
    "1010100065 Ibuprofeno 50mg/ml gotas frasco 30ml",
    "1011200055 Insulina humana nph 100 ui/ml frasco 10 ml - uso adulto e pediátrico",
    "1011200578 Isulina humana NPH 100UI/ML Caneta descartavel 3ML - uso adulto e pediátrico",
    "1011200063 Insulina humana regular 100 ui/ml frasco 10 ml - uso adulto e pediátrico",
    "1011200560 Insulina humana regular 100UI/ML Caneta descartavel 3ML uso adulto e pediátrico",
    "1011200357 Insulina humana NPH 100 ui/ml refil 3 ml - uso adulto e pediátrico",
    "1011200349 Insulina humana regular 100 ui/ml refil 3 ml - uso adulto e pediátrico",
    "1011100077 Ipratrópio, brometo gotas frasco 20 ml",
    "1012001072 Isossorbida, mononitrato 20mg comprimido - uso adulto",
    "1010200167 Isossorbida, dinitrato 10 mg comprimido",
    "1010200159 Isossorbida, dinitrato 5 mg comprimido",
    "1010200205 Isossorbida 10 Mg/Ml Ampola 1Ml",
    "1010700070 Ivermectina 6 mg comprimido",
    "1020900250 Lanceta para hgt",
    "1012001455 Lactulose 1340,00mg/ml - equivalente a 667mg/ml de lactulos frasco 120 ml - uso adulto e pediátrico",
    "1092001210 LEVODOPA 100MG + BENSERAZIDA, CLORIDRATO 25MG COMPRIMIDO BIRRANHURADO - USO ADULTO",
    "1091216727 LEVODOPA 100MG + BENSERAZIDA, CLORIDRATO 25MG CAPSULA HBS - USO ADULTO",
    "1091215615 LEVODOPA 200MG + BENSERAZIDA, CLORIDRATO 50MG COMPRIMIDO - USO ADULTO",
    "1091216379 LEVODOPA 250MG + CARBIDOPA 25MG COMPRIMIDO - USO ADULTO",
    "1010800067 Levonorgestrel 0,75 mg cartela 2 comp",
    "1010800024 Levonorgestrel+ etinilestradiol cartela 21 comp",
    "1011900111 Levotiroxina sódica 100mcg comprimido - uso adulto e pediátrico",
    "1011900073 Levotiroxina sódica 25mcg comprimido - uso adulto e pediátrico",
    "1011900081 Levotiroxina sódica 50mcg comprimido - uso adulto e pediátrico",
    "1091226439 Levotiroxina sódica 37,5mcg comprimido - uso adulto e pediátrico",
    "1011900162 Levotiroxina sódica 12,5mcg comprimido - uso adulto e pediátrico",
    "1012000050 Lidocaína gel 100 mg/5 g tubo 30 g",
    "1011300149 Loratadina 1 mg/ml suspensão oral frasco 100 ml",
    "1011300084 Loratadina 10 mg comprimido",
    "1010200035 Losartana potássica 50mg comprimido revestido",
    "1010700020 Mebendazol 100 mg comprimido",
    "1010700038 Mebendazol suspensão 100 mg/5 ml frasco 30 ml",
    "1010800016 Medroxiprogesterona, acetato 150 mg/ml ampola 1 ml - Uso Im",
    "1010800245 MEDROXIPROGESTERONA, ACETATO 25MG/ML + ESTRADIOL, CIPIONATO 5MG/ML SUSPENSAO INJETAVEL 0,5ML",
    "1011200020 Metformina, cloridrato 500 mg comprimido",
    "1011200039 Metformina, cloridrato 850 mg comprimido",
    "1010200175 Metildopa 250 mg comprimido",
    "1011800109 Metoclopramida, cloridrato 10 mg comprimido",
    "1011800052 Metoclopramida, cloridrato 5 mg/ml ampola 2 ml",
    "1011800117 Metoclopramida, cloridrato gotas frasco 10 ml",
    "1012001757 Metoprolol, succinato 47,5mg - equivalente a 50MG de Metoprolol, tartarato - uso adulto",
    "1011700031 Metronidazol 250 mg comprimido",
    "1011700058 Metronidazol 40 mg/ml suspensão oral frasco 100 ml",
    "1011700082 Metronidazol 500 mg/5 g tubo 50 g c/ 10 aplicadores",
    "1011700066 Neomicina, sulfato + bacitracina zínica tubo 10 g",
    "1010200191 Nifedipina 20 mg comprimido",
    "1010100030 Nimesulida 100mg comprimido",
    "1010100049 Nimesulida 50mg/ml frasco 15ml",
    "1010500020 Nistatina 100.000 Ui/4 g creme vaginal tubo 60 g",
    "1010700046 Nistatina 100.000 Ui/ml suspensão oral frasco 50 ml",
    "1011700406 Nitrofurantoina 100mg cápsula",
    "1010800032 Noretisterona 0,35 mg cartela 35 comp",
    "1010800040 Noretisterona, enantato + estradiol, valerato (50 + 5 mg/ml) ampola 1 ml - Uso Im",
    "1011700112 Norfloxacina 400 mg comprimido",
    "1012000041 Óleo mineral 100% frasco 100 ml",
    "1011000021 Omeprazol 20 mg cápsula",
    "1011800133 Ondansetrona 8mg - equivalente a 10mg de ondansentrona, cloridrato comprimido de desintegração oral - uso adulto e pediátrico acima de 11 anos",
    "1010300030 Paracetamol 200 mg/ml gotas frasco15 ml",
    "1010300137 Paracetamol 500mg comprimido - uso adulto e pediátrico acima de 12 anos",
    "1012004438 Pasta D'água óxido de zinco 25% (250mg/g) bisnaga 80g - uso externo - uso adulto e pediátrico",
    "1012000122 Permanganato de potássio 100 mg comprimido",
    "1091226455 Permetrina 50mg/ml loção cremosa frasco plastico",
    "1010900444 Polivitamínico gotas frasco 20 ml",
    "1011300068 Prednisolona, fosfato sódico 3 mg/ml suspensão frasco 100 ml",
    "1011300033 Prednisona 20 mg comprimido",
    "1011300025 Prednisona 5 mg comprimido",
    "1011300050 Prometazina, cloridrato 25 mg comprimido",
    "1011300130 Prometazina, cloridrato 25 mg/ml ampola 2 ml",
    "1012001196 Proprafenona, cloridrato 300mg comprimido revestido - uso adulto",
    "1010200132 Propranolol, cloridrato 40 mg comprimido",
    "1012000254 Sais para rehidratação oral envelope 27,9 g",
    "1011100042 Salbutamol 2 mg comprimido",
    "1011100263 Salbutamol Sulfato 6MG-frasco 10ML- solução para nebulização",
    "1011100093 Salbutamol, sulfato 2 mg/5 ml xarope frasco 120 ml",
    "1011100107 Salbutamol, sulfato spray oral 100 mcg/dose 200 doses",
    "1011800010 Simeticona 75 mg/ml gotas frasco 15 ml",
    "1012003717 Sinvastatina 20MG comprimido",
    "1091226471 Sulfadiazina de prata 1% (10mg/g) creme",
    "1011700040 Sulfametoxazol - trimetoprim 200/40 mg/5 ml suspensão frasco 100 m l",
    "1011700201 Sulfametoxazol - trimetoprim 400/80 mg comprimido",
    "1010900088 Sulfato ferroso 25 mg/ml gotas frasco 30 ml",
    "1010900061 Sulfato ferroso 300 mg comprimido",
    "1010900070 Sulfato ferroso 40 mg comprimido",
    "1011900022 Tiamazol 10 mg comprimido",
    "1010900118 Tiamina, cloridrato 300 mg comprimido",
    "1012002818 Tiamina, cloridrato + piridoxina, cloridrato (Ampola I), Cianocobalamina 5000 mcg (Ampola II) - Uso IM",
    "1012000157 Tiocolchicosídeo 2 mg/ml ampola 2 ml - Uso Im",
    "1011700228 Tobramicina 0,3% colírio frasco 5 ml",
    "1012000017 Varfarina sódica 5MG comprimido - USO ADULTO",
    "1011200047 Vildagliptina 50 mg comprimido (Reposição automática mediante consumo)",
    "1010900452 Vitamina a + d gotas frasco 20 ml",
    "1010900045 Vitamina a + d pomada tubo 45 g",
    "1010900053 Vitamina c 200 mg/ml gotas frasco 20 ml"
  ];

  const psicotroficoItems = [
    "1011600070 Ácido valpróico 250mg cápsula",
    "1011600088 Ácido valpróico 250mg/5ml frasco 100ml",
    "1011600096 Ácido valpróico 500mg comprimido revestido",
    "1011600010 Amitriptilina, cloridrato 25mg comprimido",
    "1011600126 Biperideno, cloridrato 2mg comprimido",
    "1011600185 Carbamazepina 20 mg/ml suspensão frasco 100 ml",
    "1011600266 Carbamazepina 200 mg comprimido",
    "1011600134 Carbonato de lítio 300 mg comprimido",
    "1011600193 Clomipramina, cloridrato 25 mg comprimido",
    "1011500032 Clonazepam 2 mg comprimido",
    "1011500393 Clonazepam 2,5mg/ml frasco de 20ml",
    "1011600100 Clorpromazina 25 mg comprimido",
    "1011600207 Clorpromazina, cloridrato 100 mg comprimido",
    "1011500067 Diazepan 10 mg comprimido",
    "1011500059 Diazepan 5 mg/ml ampola 2 ml",
    "1011600037 Fenitoína 100 mg comprimido",
    "1011600215 Fenitoína 50 mg/ml ampola 5 ml",
    "1011600274 Fenobarbital 100 mg comprimido",
    "1011600282 Fenobarbital 4% gotas frasco 20 ml",
    "1011600029 Fluoxetina, cloridrato 20 mg cápsula",
    "1011600150 Haloperidol 2 mg/ml gotas frasco 20 ml",
    "1011600223 Haloperidol 5 mg comprimido",
    "1011600177 Haloperidol 5 mg/ml ampola 1 ml - Uso Im",
    "1011600169 Haloperidol, decanoato 70,52 mg/ml ampola 1 ml",
    "1011600231 Imipramina 25 mg comprimido",
    "1011600240 Levomepromazina 4% gotas frasco 20 ml",
    "1011600410 Naltrexona, cloridrato 50 mg comprimido",
    "1011500083 Nitrazepan 5 mg comprimido",
    "1011600053 Nortriptilina, cloridrato 25 mg comprimido",
    "1011600061 Sertralina, cloridrato 50 mg comprimido",
    "1011600258 Tioridazina, cloridrato 100 mg comprimido"
  ];

  // Default items for other sectors (empty since not specified)
  const defaultItems = [];

  // Function to update datalist based on sector
  function updateDatalist(setorId, sectorValue) {
    const datalist = document.getElementById('lista-itens');
    datalist.innerHTML = ''; // Clear existing options

    let items;
    if (sectorValue === 'Farmácia') {
      items = farmaciaItems;
    } else if (sectorValue === 'Psictrópico') {
      items = psicotroficoItems;
    } else {
      items = defaultItems;
    }

    items.forEach(item => {
      const option = document.createElement('option');
      option.value = item;
      datalist.appendChild(option);
    });

    // Update existing item inputs in the sector
    const setor = document.querySelector(`#${setorId}`).closest('.setor');
    const itemInputs = setor.querySelectorAll('.item-nome');
    itemInputs.forEach(input => {
      input.value = ''; // Clear input to avoid invalid selections
    });
  }

  // Block right-click
  document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
    return false;
  });

  // Block developer tools shortcuts
  document.addEventListener('keydown', function(e) {
    if (e.keyCode === 123 || (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) || (e.ctrlKey && e.keyCode === 85)) {
      e.preventDefault();
      return false;
    }
  });

  let setorIndex = 0;

  function adicionarSetor() {
    const container = document.getElementById('setoresContainer');
    const div = document.createElement('div');
    div.className = 'setor';
    div.setAttribute('data-setor-index', setorIndex);
    const setorId = `setor-${setorIndex}`;

    div.innerHTML = `
      <label>Setor:</label>
      <div class="setor-select-group">
        <div class="custom-select" id="${setorId}">
          <div class="selected" onclick="toggleOptions('${setorId}')">Selecione um setor</div>
          <input type="hidden" name="setor" value="" required>
          <div class="options">
            <div class="option" data-value="Farmácia" onclick="selectOption('${setorId}', 'Farmácia')">Farmácia</div>
            <div class="option" data-value="Psictrópico" onclick="selectOption('${setorId}', 'Psictrópico')">Psictrópico</div>
            <div class="option" data-value="Enfermagem" onclick="selectOption('${setorId}', 'Enfermagem')">Enfermagem</div>
            <div class="option" data-value="Odonto" onclick="selectOption('${setorId}', 'Odonto')">Odonto</div>
            <div class="option" data-value="Consumo e Limpeza" onclick="selectOption('${setorId}', 'Consumo e Limpeza')">Consumo e Limpeza</div>
            <div class="option" data-value="Materiais de Escritório" onclick="selectOption('${setorId}', 'Materiais de Escritório')">Materiais de Escritório</div>
            <div class="option" data-value="Impressos" onclick="selectOption('${setorId}', 'Impressos')">Impressos</div>
            <div class="option" data-value="Carrinho de Emergência" onclick="selectOption('${setorId}', 'Carrinho de Emergência')">Carrinho de Emergência</div>
          </div>
        </div>
        <button type="button" onclick="removerSetor(this)" class="remove-button remove-setor-button">Remover Setor</button>
      </div>

      <div class="itens" id="itens-${setorIndex}">
      </div>

      <div class="observacao-group">
        <label>Digite aqui uma observação:</label>
        <input type="text" class="observacao" maxlength="70">
      </div>

      <div class="item-buttons">
        <button type="button" onclick="adicionarItem(${setorIndex})">Adicionar Item</button>
      </div>
    `;

    container.appendChild(div);
    adicionarItem(setorIndex);
    setorIndex++;
  }

  function toggleOptions(setorId) {
    const options = document.querySelector(`#${setorId} .options`);
    options.style.display = options.style.display === 'block' ? 'none' : 'block';
  }

  function selectOption(setorId, value) {
    const selected = document.querySelector(`#${setorId} .selected`);
    const hiddenInput = document.querySelector(`#${setorId} input[name="setor"]`);
    selected.textContent = value;
    hiddenInput.value = value;
    toggleOptions(setorId);
    updateDatalist(setorId, value);
  }

  // Close dropdown when clicking outside
  document.addEventListener('click', function(e) {
    if (!e.target.closest('.custom-select')) {
      document.querySelectorAll('.options').forEach(opt => opt.style.display = 'none');
    }
  });

  function removerSetor(button) {
    button.closest('.setor').remove();
    updateDatalist('setor-0', ''); // Reset to default when removing sector
  }

  function adicionarItem(index) {
    const container = document.getElementById(`itens-${index}`);
    const div = document.createElement('div');
    div.className = 'item';
    div.innerHTML = `
      <div class="item-input-group item-nome-group">
        <label>Item:</label>
        <input type="text" class="item-nome" list="lista-itens" required>
      </div>
      <div class="item-input-group item-qtd-group">
        <label>Quantidade:</label>
        <input type="number" class="item-qtd" min="1" required>
      </div>
      <button type="button" onclick="removerItem(this)" class="remove-button remove-item-button">Remover</button>
    `;
    container.appendChild(div);
  }

  function removerItem(button) {
    button.closest('.item').remove();
  }

  document.getElementById('pedidoForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const solicitante = document.getElementById('solicitante').value.trim();
    const unidade = document.getElementById('unidade').value.trim();

    if (!solicitante || !unidade) {
      alert('Por favor, preencha os campos de solicitante e unidade.');
      return;
    }

    const setores = document.querySelectorAll('.setor');
    let todosSetoresValidos = true;

    setores.forEach(setor => {
      const nomeSetor = setor.querySelector('input[name="setor"]').value.trim();
      const itensNomes = setor.querySelectorAll('.item-nome');
      const itensQtds = setor.querySelectorAll('.item-qtd');

      if (!nomeSetor) {
        todosSetoresValidos = false;
        alert('Por favor, selecione um setor.');
        return;
      }

      if (itensNomes.length === 0) {
        todosSetoresValidos = false;
        alert('Por favor, adicione pelo menos um item em cada setor.');
        return;
      }

      itensNomes.forEach((input, index) => {
        const nome = input.value.trim();
        const qtd = itensQtds[index].value.trim();

        if (!nome || !qtd) {
          todosSetoresValidos = false;
          alert('Por favor, preencha todos os campos de item e quantidade.');
          return;
        }

        // Validate if the selected item is valid for the sector
        let validItems;
        if (nomeSetor === 'Farmácia') {
          validItems = farmaciaItems;
        } else if (nomeSetor === 'Psictrópico') {
          validItems = psicotroficoItems;
        } else {
          validItems = defaultItems;
        }

        if (!validItems.includes(nome)) {
          todosSetoresValidos = false;
          alert(`O item "${nome}" não é válido para o setor ${nomeSetor}.`);
          return;
        }
      });
    });

    if (!todosSetoresValidos) {
      return;
    }

    let corpoEmail = `SOLICITAÇÃO DE PEDIDO EXTRA\n\n`;
    corpoEmail += `Solicitante: ${solicitante}\n`;
    corpoEmail += `Unidade: ${unidade}\n\n`;
    corpoEmail += `----------------------------------------\n\n`;

    setores.forEach(setor => {
      const nomeSetor = setor.querySelector('input[name="setor"]').value;
      corpoEmail += `SETOR: ${nomeSetor}\n\n`;

      const itensNomes = setor.querySelectorAll('.item-nome');
      const itensQtds = setor.querySelectorAll('.item-qtd');

      itensNomes.forEach((input, index) => {
        const nome = input.value;
        const qtd = itensQtds[index].value;
        corpoEmail += `- ${nome} (Qtd: ${qtd})\n`;
      });
      corpoEmail += `\n`;

      const observacao = setor.querySelector('.observacao').value;
      if (observacao) {
        corpoEmail += `Observação: ${observacao}\n\n`;
      }

      corpoEmail += `----------------------------------------\n\n`;
    });

    const mailto = `mailto:leitaoochefe@gmail.com?subject=Pedido Extra - ${encodeURIComponent(unidade)}&body=${encodeURIComponent(corpoEmail)}`;
    window.location.href = mailto;
  });

  window.onload = function() {
    adicionarSetor();
    updateDatalist('setor-0', ''); // Initialize with default items
  };
</script>

</body>
</html>
